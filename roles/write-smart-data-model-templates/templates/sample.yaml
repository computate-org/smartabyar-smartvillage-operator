---
apiVersion: smartvillage.computate.org/v1
kind: {{ ENTITY_TYPE }}
metadata:
  labels:
    app.kubernetes.io/name: {{ ENTITY_TYPE | lower }}
    app.kubernetes.io/instance: {{ ENTITY_TYPE | lower }}-sample
    app.kubernetes.io/part-of: smartvillage-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: smartvillage-operator
  name: 'sweden-veberod-1-sjobovagen-se'
spec:
  description: |
    {{ FIWARE_SMART_DATA_MODELS[DOMAIN_NAME].SUBMODULES[SUBMODULE_SHORT_NAME].MODELS[MODEL_NAME].MODEL_DESCRIPTION | indent(4, False) }}
{% if spec.fiware is defined %}
  fiware:
    service: {{ spec.fiware.service }}
    service_path: {{ spec.fiware.service_path }}
{% endif %}
{% if spec.iot_agent is defined %}
  iot_agent:
    iot_host: {{ spec.iot_agent.iot_host }}
{% endif %}
{% if spec.service_group is defined %}
  service_group:
    cb_host: {{ spec.service_group.cb_host }}
    resource: {{ spec.service_group.resource }}
    apikey: {{ spec.service_group.apikey }}
{% endif %}
{% if spec.device is defined %}
  device:
    transport: {{ spec.device.transport }}
    id: {{ spec.device.id }}
    mqtt_host: {{ spec.device.mqtt_host }}
    mqtt_port: {{ spec.device.mqtt_port }}
    mqtt_subscription_topic: {{ spec.device.mqtt_subscription_topic }}
{% endif %}
{% if spec.smartabyar_smartvillage is defined %}
  smartabyar_smartvillage:
    enabled: {{ spec.smartabyar_smartvillage.enabled }}
    auth_secret_name: {{ spec.smartabyar_smartvillage.auth_secret_name }}
    auth_token_url: {{ spec.smartabyar_smartvillage.auth_token_url }}
    site_base_url: {{ spec.smartabyar_smartvillage.site_base_url }}
    smart_model_api: {{ spec.smartabyar_smartvillage.smart_model_api }}
{% endif %}
{% if spec.alternate_model is defined %}
  alternate_model:
    enabled: {{ spec.alternate_model.enabled }}
    id: {{ spec.alternate_model.id }}
{% endif %}
  attributes:
{% for key, attribute in spec.attributes.items() %}
{% if attribute.default is defined %}
{% if (attribute.default | type_debug) == 'AnsibleUnicode' %}
    {{ key }}: |
      {{ attribute.default | indent(6, False) }}{% else %}
{% if (attribute.default | type_debug) == 'dict' %}
    {{ key }}:
      {{ attribute.default | to_nice_yaml(indent=2) | indent(6, False) }}{% else %}
    {{ key }}: {{ attribute.default }}{% endif %}
{% endif %}
{% endif %}
{% endfor %}
