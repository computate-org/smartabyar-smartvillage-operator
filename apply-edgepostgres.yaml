---
- name: Install a EdgePostgres resource to OpenShift
  hosts: localhost
  connection: local
  tasks:
    - fail:
        msg: Variable ansible_operator_meta_name is not defined
      when: ansible_operator_meta_name is not defined
    - fail:
        msg: Variable ansible_operator_meta_namespace is not defined
      when: ansible_operator_meta_namespace is not defined
    - fail:
        msg: Variable crd_path is not defined
      when: crd_path is not defined
    - include_role:
        name: smart-data-model-vars
    - include_role:
        name: apply-edgepostgres
  vars:
    ENTITY_TYPE: EdgePostgres
    ansible_operator_meta:
      name: "{{ ansible_operator_meta_name }}"
      namespace: "{{ ansible_operator_meta_namespace }}"
    verify_connections: false
