apiVersion: smartvillage.computate.org/v1
kind: TrafficFlowObserved
metadata:
  labels:
    app.kubernetes.io/name: trafficflowobserved
    app.kubernetes.io/instance: trafficflowobserved-sample
    app.kubernetes.io/part-of: smartvillage-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: smartvillage-operator
  name: 'sweden-veberod-1-sjobovagen-se'
spec:
  iot_agent:
    iot_host: http://iotagent-json-north-fiware.apps-crc.testing
  fiware:
    service: smarttrafficlights
    service_path: /Sweden/Veberod/CityCenter
  service_group:
    cb_host: 'http://orion-ld-fiware.apps-crc.testing'
    resource: /iot/json
    apikey: VeberodIntersection1
  device:
    transport: MQTT
    id: 'Sjobovagen-SE'
    mqtt_host: fiware-broker-mqtt-0-svc.fiware.svc.cluster.local
    mqtt_port: 1883
    mqtt_subscription_topic: iot/subscribe
  smartabyar_smartvillage:
    enabled: true
    auth_secret_name: keycloak-client-secret-smartvillage
    auth_token_url: https://keycloak-sso.apps-crc.testing/realms/SMARTVILLAGE/protocol/openid-connect/token
    site_base_url: https://smartvillage.apps-crc.testing
    smart_model_api: /api/traffic-flow-observed
  sumo:
    enabled: true
    fix_seed: false
    avg_vehicle_per_min: 10.00
    demand_scaling_factor: 1.00
    min_green_time_sec: 20.00
    max_green_time_sec: 30.00
    queue_threshold: 8.00
    routes:
      - edges: '96027913#0 96027913#2 30186293 311389510#1'
        id: r13
    run_time: 0
    v_types:
      - accel: 2.6
        decel: 4.5
        id: v12
        length: 5
        max_speed: 55
        min_gap: 1
        sigma: 0.5
  attributes:
    address:
      name: address
      type: Object
      value:
        addressCountry: Sweden
        addressLocality: Veberöd
        streetAddress: Sjöbovägen
      description: |
        The mailing address
      docs: |
        https://github.com/smart-data-models/dataModel.Transportation/blob/ca8d89fe82b71403fcb0905b96c79b8d9bff54bb/TrafficFlowObserved/model.yaml#L4-L34
    alternateName:
      name: alternateName
      type: Text
      description: |
        An alternative name for this item
      docs: |
        https://github.com/smart-data-models/dataModel.Transportation/blob/ca8d89fe82b71403fcb0905b96c79b8d9bff54bb/TrafficFlowObserved/model.yaml#L35-L39
    areaServed:
      name: areaServed
      type: Text
      description: |
        The geographic area where a service or offered item is provided
      docs: |
        https://github.com/smart-data-models/dataModel.Transportation/blob/ca8d89fe82b71403fcb0905b96c79b8d9bff54bb/TrafficFlowObserved/model.yaml#L40-L45
      alternate_name: edges
      alternate_description: |
        The edges the vehicle shall drive along, given as their ids, separated using spaces
      alternate_docs: |
        https://sumo.dlr.de/docs/Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#routes
      default: |
        96027913#0 96027913#2 30186293 311389510#1
    averageGapDistance:
      name: averageGapDistance
      type: Number
      description: |
        Average gap distance between consecutive vehicles
      docs: |
        https://github.com/smart-data-models/dataModel.Transportation/blob/ca8d89fe82b71403fcb0905b96c79b8d9bff54bb/TrafficFlowObserved/model.yaml#L46-L53
      alternate_name: minGap
      alternate_description: |
        Empty space after leader [m]
      alternate_docs: |
        https://sumo.dlr.de/docs/Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html#available_vtype_attributes
      minimum: 1
      default: 1
    averageHeadwayTime:
      # See Smart Data Model: 
      name: averageHeadwayTime
      type: Text
      alternate_name: tau
      alternate_description: |
        The driver's desired (minimum) time headway. 
        Exact interpretation varies by model. 
        For the default model Krauss this is based on the net space between leader back and follower front).
      alternate_docs: https://sumo.dlr.de/docs/Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes.html
    averageVehicleLength:
      name: averageVehicleLength
      type: Text
    averageVehicleSpeed:
      name: averageVehicleSpeed
      type: Text
    congested:
      name: congested
      type: Boolean
    dataProvider:
      name: dataProvider
      type: Text
    dateCreated:
      name: dateCreated
      type: Text
    dateModified:
      name: dateModified
      type: Text
    dateObserved:
      name: dateObserved
      type: Text
    dateObservedFrom:
      name: dateObservedFrom
      type: Text
    dateObservedTo:
      name: dateObservedTo
      type: Text
    description:
      name: description
      type: Text
    intensity:
      name: intensity
      type: Text
    laneDirection:
      name: laneDirection
      type: Text
    laneId:
      name: laneId
      type: Text
    name:
      name: name
      type: Text
    occupancy:
      name: occupancy
      type: Text
    owner:
      name: owner
      type: Object
    refRoadSegment:
      name: refRoadSegment
      type: Text
    reversedLane:
      name: reversedLane
      type: Boolean
    seeAlso:
      name: seeAlso
      type: Object
    source:
      name: source
      type: Text
    vehicleSubType:
      name: vehicleSubType
      type: Text
    vehicleType:
      name: vehicleType
      type: Text
